var D=Object.defineProperty;var N=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var C=(e,t,n)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b=(e,t)=>{for(var n in t||(t={}))F.call(t,n)&&C(e,n,t[n]);if(N)for(var n of N(t))M.call(t,n)&&C(e,n,t[n]);return e};import{j as $,a as f,r as l,R as B,b as P}from"./vendor.ff99d1ed.js";const q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};q();const i=$.exports.jsx,u=$.exports.jsxs,z=({handleSubmitEvent:e,handleNameChange:t,handleNumberChange:n,newName:c,newNumber:o})=>u("form",{onSubmit:e,children:[u("div",{children:["name: ",i("input",{onChange:t,value:c})]}),u("div",{children:["number: ",i("input",{onChange:n,value:o})]}),i("div",{children:i("button",{type:"submit",children:"add"})})]}),H=({filter:e,handleFilterChange:t})=>u("div",{children:["filter shown with"," ",i("input",{onChange:t,value:e,type:"text"})," "]}),K=({contact:e})=>u("span",{children:[e.name," ",e.number]}),p="/api/persons",T=()=>f.get(p).then(e=>e.data),U=e=>f.post(p,e).then(t=>t.data),V=e=>f.get(`${p}/${e}`).then(t=>t.data),G=(e,t)=>f.put(`${p}/${e}`,t).then(n=>n.data),J=e=>f.delete(`${p}/${e}`);var y={getAll:T,createContact:U,getOne:V,changeOne:G,deleteOne:J};const Q=({contacts:e,filter:t,setContacts:n,setNotification:c})=>{const o=r=>r.name.toLowerCase().includes(t),a=r=>confirm(`Are you sure you want to delete ${r.name}?`)&&y.deleteOne(r.id).then(()=>{n(e.filter(m=>m.id!==r.id)),c({message:`Deleted ${r.name}.`})}).catch(()=>{c({isError:!0,message:`Information of ${r.name} has already been removed from the server.`}),n(e.filter(m=>m.id!==r.id))});return i("ul",{children:e.filter(r=>o(r)).map(r=>u("li",{children:[i(K,{contact:r})," ",i("button",{onClick:()=>a(r),children:"delete"})]},r.id))})},W=({message:e,isError:t=!1})=>{const n=t?"red":"green";return e===""?null:i("div",{style:{backgroundColor:"lightgray",border:`2px solid ${n}`,borderRadius:"5px",color:`${n}`,fontSize:"20px",padding:"5px",marginBottom:"10px"},children:e})},X=()=>{const[e,t]=l.exports.useState(""),[n,c]=l.exports.useState(!1);return[{message:e,isError:n},({message:a,isError:r=!1})=>{t(a),r&&c(r),setTimeout(()=>{t(""),c(!1)},5e3)}]},Y=()=>{const[e,t]=l.exports.useState([]),[n,c]=l.exports.useState(""),[o,a]=l.exports.useState(""),[r,m]=l.exports.useState(""),[S,h]=X();l.exports.useEffect(()=>{y.getAll().then(s=>t(s)).catch(s=>h({message:s,isError:!0}))},[]);const w={newName:n,newNumber:o},O=s=>{s.preventDefault();const d={name:n,number:o};if(L(n))return E(d);y.createContact(d).then(g=>{t([...e,g]),h({message:`Added ${g.name}.`})}),c(""),a("")},E=async s=>{const d=async()=>{try{return await y.changeOne(x,s)}catch{h({isError:!0,message:`Information of ${s.name} has already been removed from the server.`})}},g=`${s.name} is already added to the phonebook, replace the old number with a new one?`;if(!confirm(g))return;const x=I(s.name),v=await d(),R=e.filter(k=>k.id!==x);h({message:`Changed ${v.name} number to ${v.number}.`}),t([...R,v])},I=s=>e.find(d=>d.name===s).id,L=s=>e.some(d=>d.name===s),j={handleNameChange:s=>c(s.target.value),handleNumberChange:s=>a(s.target.value),handleSubmitEvent:O},A=s=>m(s.target.value.toLowerCase());return u("div",{children:[i("h1",{children:"Phonebook"}),i(W,b({},S)),i(H,{filter:r,handleFilterChange:A}),i("h2",{children:"add a new"}),i(z,b(b({},w),j)),i("h2",{children:"Numbers"}),i(Q,{contacts:e,filter:r,setContacts:t,setNotification:h})]})};B.render(i(P.StrictMode,{children:i(Y,{})}),document.getElementById("root"));
